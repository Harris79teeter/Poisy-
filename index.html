<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pöïsy - Welcome</title>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>

<style>
  body {font-family: Arial; margin:0; background:#1E90FF; color:#fff; text-align:center; min-height:100vh; display:flex; flex-direction:column; justify-content:center;}
  .container {max-width:400px; margin:20px auto; background:rgba(0,0,0,0.25); padding:30px; border-radius:15px;}
  input {width:90%; padding:14px; margin:12px 0; border-radius:8px; border:none; font-size:16px;}
  button {width:95%; padding:15px; background:#FFD700; color:#000; font-weight:bold; border:none; border-radius:10px; cursor:pointer; font-size:18px;}
  button:hover {background:#FFC300;}
  button:disabled {background:#999; cursor:not-allowed;}
  .toggle-link {color:#FFD700; cursor:pointer; font-weight:bold; text-decoration:underline;}
  .badge svg {width:160px; height:160px;}
  .welcome-text {font-size:32px; color:#FFD700; text-shadow:2px 2px 10px #000; animation:glow 3s infinite alternate;}
  @keyframes glow {0%{text-shadow:2px 2px 10px #000;} 100%{text-shadow:0 0 30px #FFF, 0 0 50px #FFD700;}}
  .hidden {display:none;}
</style>
</head>
<body>

<div style="margin-bottom:20px;">
  <svg viewBox="0 0 64 64">
    <circle cx="32" cy="32" r="12" fill="#FFD700" stroke="#FFA500" stroke-width="2"/>
    <circle cx="32" cy="32" r="22" fill="none" stroke="#FFB800" stroke-width="4"/>
    <circle cx="32" cy="32" r="26" fill="none" stroke="#FFA500" stroke-width="3"/>
    <circle cx="27" cy="30" r="3" fill="#000"/>
    <circle cx="37" cy="30" r="3" fill="#000"/>
    <polygon points="30,36 34,36 32,41" fill="#000"/>
    <path d="M26,43 Q32,48 38,43" stroke="#000" stroke-width="2" fill="none"/>
  </svg>
  <div class="welcome-text">Welcome to Pöïsy</div>
</div>

<!-- Sign Up -->
<div class="container" id="signupForm">
  <h1>Create Account</h1>
  <input type="email" id="signupEmail" placeholder="Email" required>
  <input type="password" id="signupPassword" placeholder="Password (6+ characters)" required>
  <button id="signupBtn" onclick="signUp()">Sign Up</button>
  <div class="toggle-link" onclick="showLogin()">Already have an account? <strong>Login</strong></div>
</div>

<!-- Login -->
<div class="container hidden" id="loginForm">
  <h1>Login</h1>
  <input type="email" id="loginEmail" placeholder="Email" required>
  <input type="password" id="loginPassword" placeholder="Password" required>
  <button id="loginBtn" onclick="login()">Login</button>
  <div class="toggle-link" onclick="showSignup()">Don't have an account? <strong>Sign Up</strong></div>
</div>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyB6vgNBWwaa5ScUqGutsDAV7Eu4YKMqfjg",
    authDomain: "poisy-2dedf.firebaseapp.com",
    projectId: "poisy-2dedf",
    storageBucket: "poisy-2dedf.appspot.com",
    messagingSenderId: "310724767012",
    appId: "1:310724767012:web:8a6f3e09510265b24917b1"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  function showSignup() {
    document.getElementById('signupForm').classList.remove('hidden');
    document.getElementById('loginForm').classList.add('hidden');
  }

  function showLogin() {
    document.getElementById('loginForm').classList.remove('hidden');
    document.getElementById('signupForm').classList.add('hidden');
  }

  function signUp() {
    const email = document.getElementById('signupEmail').value.trim();
    const password = document.getElementById('signupPassword').value;
    const btn = document.getElementById('signupBtn');

    if (!email || !password) return alert("Fill all fields");
    if (password.length < 6) return alert("Password too short");

    btn.disabled = true;
    btn.textContent = "Creating...";

    auth.createUserWithEmailAndPassword(email, password)
      .then(() => {
        alert("Account created successfully!");
        window.location.href = "dashboard.html";
      })
      .catch(error => {
        if (error.code === 'auth/email-already-in-use') {
          alert("This email is already registered. Please login instead.");
          showLogin();
        } else {
          alert("Error: " + error.message);
        }
        btn.disabled = false;
        btn.textContent = "Sign Up";
      });
  }

  function login() {
    const email = document.getElementById('loginEmail').value.trim();
    const password = document.getElementById('loginPassword').value;
    const btn = document.getElementById('loginBtn');

    if (!email || !password) return alert("Fill all fields");

    btn.disabled = true;
    btn.textContent = "Logging in...";

    auth.signInWithEmailAndPassword(email, password)
      .then(() => {
        window.location.href = "dashboard.html";
      })
      .catch(error => {
        alert("Login failed: " + error.message);
        btn.disabled = false;
        btn.textContent = "Login";
      });
  }

  // Auto redirect if already logged in
  auth.onAuthStateChanged(user => {
    if (user) {
      window.location.href = "dashboard.html";
    }
  });
</script>
</body>
</html>
